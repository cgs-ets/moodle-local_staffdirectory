define ("local_staffdirectory/directory",["jquery","core/log","core/ajax"],function(a,b){'use strict';function c(a){var b=this;b.rootel=a;b.dir=b.rootel.find(".directory-list").first()}c.prototype.main=function(){var b=this,c;b.rootel.on("keyup",".directory-search",function(d){clearTimeout(c);var e=a(this);if(13==d.which){b.search(e)}else{c=setTimeout(function(){b.search(e)},500)}})};c.prototype.search=function(b){var c=this;c.hasresults=!1;if(""==b.val()){c.dir.find(".dir-row").show();return}var d=b.val();c.rootel.addClass("searching");c.rootel.removeClass("noitems");c.dir.find(".dir-row").hide();var e=c.dir.find(".attr_staffcode").filter(function(){var b=new RegExp(d,"i");return b.test(a(this).text())}).parent(),f=c.dir.find(".attr_displayname").filter(function(){var b=new RegExp(d,"i");return b.test(a(this).text())}).parent(),g=c.dir.find(".attr_campus").filter(function(){var b=new RegExp(d,"i");return b.test(a(this).text())}).parent(),h=c.dir.find(".attr_department").filter(function(){var b=new RegExp(d,"i");return b.test(a(this).text())}).parent(),i=c.dir.find(".attr_jobposition").filter(function(){var b=new RegExp(d,"i");return b.test(a(this).text())}).closest(".dir-row");e.show();f.show();g.show();h.show();i.show();c.rootel.removeClass("searching");if(!(e.length+f.length+g.length+h.length+i.length)){c.rootel.addClass("noitems")}};return{init:function(){b.debug("local_staffdirectory/directory: initializing");var d=a("#local_staffdirectory-root");if(!d.length){b.error("local_staffdirectory/directory: '#local_staffdirectory-root' not found!");return}var e=new c(d);e.main()}}});
//# sourceMappingURL=directory.min.js.map
